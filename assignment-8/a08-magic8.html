<!doctype html>
<html>
  <head>
    <title>A8 | Magic 8 Ball</title>
    <meta charset="utf8">
  </head>
	<body>
	
		<button id="getFortune">Get Fortune!</button>
		<div class="fortune"></div>
		
		<!-- <button id="optimistic" data-category="">Get Optimistic Fortune</button><br /> -->
		<!-- <button id="pessimistic" data-category="">Get Pessimistic Fortune</button> -->

		<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
		<script>
			
			var askOracle = function() {
				// not searching in page, goes outside of page // request is asking for promise.
				// "done" is the actual promise if granted, otherwise "fail" if not granted
				var requestJSONP = $.ajax("http://thomaswilburn.net:8080/magic8", { 
					dataType: "jsonp", // what we expect back
					//jsonpCallback: "fooga"
				});
				
				requestJSONP.fail (function() {
					console.log("Request failed");
				});
	
				requestJSONP.done(function(data) { // pass in data from server
					// console.log("from JSONP!", data);
					$(".fortune").empty(); // clear out any previous text results in the div
					var makeParagraph = $("<p></p>"); // creating p for page, doesn't have a home yet, home for this assignment is div class="fortune"
					for (var i = 0; i < data.answer.length; i++) {
						var fortuneDiv = $(".fortune"); // use jQuery to find the .fortune div, and assign the div to a variable
						makeParagraph.append(data.answer[i]); // put each answer in the makeParagraph variable
						// fortuneDiv.html(makeParagraph.fadeIn("slow")); // innerHTML implied
					}
						
					// listen for button push
						// var optimistic = $("#optimistic");
						// var pessimistic = $("#pessimistic");
					// if button is pushed
					
					// if class is equal to optimistic or pessimistic
					// if (button.optimistic) {
						//code
					// }
					
					// call category with optimistic or pessimistic attribute
					// if (category.optimistic) {
						// m8result =
					// } else {
						// m8result =
					// }
					
					fortuneDiv.html(makeParagraph.fadeIn("slow")); // works in th e loop too.
				});
				
			};
			
			var getFortune = $("#getFortune"); // find the id for the button
			getFortune.on("click", function() {
				askOracle();	
			});
			

			
		</script>
	</body>
</html>
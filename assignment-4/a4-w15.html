<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<title>a4-w15: Top Companies</title>
</head>

<body>
	<!-- companies.js is an array of company objects -->
	<script src="companies.js"></script>
	<script>

		console.log("1. What's the smallest company (in terms of employee count) on the list?"); 
		var leastEmployees = companies[0];
		for(var i = 0; i < companies.length; i++) {
			var item = companies[i];
			// console.log(item.employees);
			if(item.employees < leastEmployees.employees) {
				leastEmployees = item;
			}
		}

		console.log("The smallest company (in terms of employee count) on the list is: " + 
			leastEmployees.company + ". They have " + leastEmployees.employees + " employees.");


		console.log("2. Several companies lost money this year: they had a negative profit." +
			"What were these companies?"); 

		var  negativeProfit = [];
		for(var i = 0; i < companies.length; i++) {
			var company = companies[i];
			// console.log(company.company);

			if (company.profit < 0) {
				negativeProfit.push(company);
			}
		}

		// shows array of negative profit objects
		// console.log("Array of negative profit objects are: ", negativeProfit);

		console.log("Companies with negative profits are: ");
		for(var key in negativeProfit) {
			var value = negativeProfit[key];
			console.log(value.company, value.profit);
		}

		console.log("3. What's the average market cap for companies in the manufacturing sector?"); 

		// Put manufacturing objects in array
		manufacturingCompanies = [];
		var counter = 0;
		for(var i = 0; i < companies.length; i++) {
			var item = companies[i];
			if (item.sector == "manufacturing") {
				manufacturingCompanies.push(item);
			}

			counter = counter + item.marketCap;
		}

		// console.log(manufacturingCompanies);
		// console.log(counter);
		// console.log(manufacturingCompanies.length);
		console.log("The average market cap for companies in the manufacturing sector is: " + 
			counter / manufacturingCompanies.length);


		console.log("4. Which sector has the highest number of employees? Which has the lowest?" + 
			" (optional, not for credit)");

		var sectors = {};
		var employeeTotal = 0;
		// var counter = 0;
		for(var i = 0; i < companies.length; i++) {
			
			// make varibale for comparison
			var item = companies[i];

			// put sectors in new array
			var sectorKey = item.sector;

			// if sectors has not seen this type of object key
			if (!sectors[sectorKey]) {
				// make a new empty array that will contain unique sector key objects
				sectors[sectorKey] = [];
			}

			// put key / arrays containing number of employees in sector object
			sectors[sectorKey].push(item.employees);
		}

		// console.log(sectors);

		// initialize the highestEmployees and LowestEmployees objects
		var highestEmployees = { sector: "", employees: -Infinity };
		var lowestEmployees = { sector: "", employees: Infinity };
		for(var key in sectors){

			// counter for employees
			var sumEmployees = 0;

			// put each array of employees values into variable
			var item = sectors[key];

			// run loop until there are no more arrays of employees left in the sectors object
			for (var i = 0; i < item.length; i++) {

				// add values in the array of employees
				sumEmployees += item[i];
			}

			if (sumEmployees > highestEmployees.employees) {
				highestEmployees.sector = key;
				highestEmployees.employees = sumEmployees;
			}

			if (sumEmployees < lowestEmployees.employees) {
				lowestEmployees.sector = key;
				lowestEmployees.employees = sumEmployees;	
			}

		}

		console.log("The sector with the highest number of employees is " + highestEmployees.sector +
			". " + highestEmployees.sector + " has " + highestEmployees.employees + " employees.");

		console.log("The sector with the lowest number of employees is " + lowestEmployees.sector + 
			". " + lowestEmployees.sector + " has " + lowestEmployees.employees + " employees.");


		// 5. Which company had the highest gain in ranking from the previous year, and which had the highest drop in ranking? (optional, not for credit)
		console.log("5. Which company had the highest gain in ranking from the previous year," + 
			"and which had the highest drop in ranking? (optional, not for credit)");

		var highestGain =  {};
		var highestDrop = {};
		// initialize object to have company and rank properties
		var companyRatings = { company: "", rank: -Infinity };
		for(var i = 0; i < companies.length; i++) {
			var item = companies[i];

			companyRatings.company = item.company;
			companyRatings.rank = item.rank;

			// companies.company 
			// companies.rank


			// var counter = 0;
			// for(key in )
			console.log(companyRatings);

		}

		

	</script>
</body>
</html>